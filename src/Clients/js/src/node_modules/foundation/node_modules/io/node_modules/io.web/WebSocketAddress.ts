import {
    TimeSpan,
    CancellationToken,
} from 'foundation';

import {
    WebSocketLikeCtor,
    Socket,
    ClientWebSocket,
} from 'io';

import { Address } from '.';

export class WebSocketAddress extends Address {
    constructor(
        public readonly url: string,
        public readonly ctor: WebSocketLikeCtor | undefined = undefined,
    ) {
        super();
    }

    public async connectAsync(timeout: TimeSpan, ct: CancellationToken): Promise<Socket> {
        return await ClientWebSocket.connect(this, timeout, ct);
    }
}
